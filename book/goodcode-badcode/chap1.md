## 코드는 어떻게 소프트웨어가 되는가?

코드를 작성할 때 내리는 일상적인 결정은 그것만 보면 작고 때로는 보잘것 없을수 있지만, 좋은 소프트웨어인지 아닌지는 이러한 작은 결정들이 모여서 이루어진다.  

소프트웨어는 코드로 만들어진다.  
코드는 일반적으로 작성하자마자 실제로 실행되는 소프트웨어가 되는 것이 아니다. 의도한 대로 작동하고 기존의 기능이 여전히 잘 작동한다고 확신하기 위한 다양한 과정과 점검이 이루어진다.  
이러한 과정을 소프트웨어 개발 및 배포 프로세스라고 부른.

## 코드 품질의 목표
코드를 고품질 혹은 저품질로 정의하는 것은 본질적으로 주관적이고 다소 성급한 것이다.  
좀 더 객관적이 되기 위해서는 한 발짝 뒤로 물러서서 코드를 통해 정말로 달성하려는 것이 무엇인지 생각해보는 것이 유용하다.  
이러한 것을 달성하는 데 도움이 되면 높은 품질의 코드이고 방해된다면 낮은 품질의 코드다.  
저자는 코드를 작성할 때 다음과 같은 네 가지 상위 수준의 목표를 달성하려고 한다.

### 코드는 작동해야 한다 
우리가 코드를 작성하는 이유는 문제를 해결하기 위함이다.  
코드의 첫 번째 목표는 작성된 목적대로 동작해야 하는 것이다.  
우리가 해결하려고 하는 문제를 실제로 해결해야 한다.  

### 코드는 작동이 멈추면 안된다
코드 작동은 매우 일시적일 수 있다. 오늘은 잘 돌아가지만 이후에도 여전히 작동하게 할 수 있을까?  
현재는 잘 돌아가지만 미래에 제대로 동작하지 않는다면 그 코드는 유용한 코드가 아니다.  
당장 돌아가는 코드를 만들기는 쉽지만, 변화하는 환경과 요구 사항에도 불구하고 계속 작동하는 코드를 만드는 것은 어렵다.

### 코드는 변경된 요구 사항에 적을할 수 있어야 한다
한번 작성하고 다시는 수정되지 않는 코드는 거의 없다. 요구 사항은 계속 변한다.  
적응 가능한 코드를 작성하기 위해 얼마나 많은 노력을 기울여야 할지에 대해 균형 잡힌 결정을 내리는 것은 까다롭다.  
한편으로는 소프트웨어의 요구 사항이 시간이 지남에 따라 변할 것이라는 사실을 알지만, 또 다른 한편으로 요구 사항이 어떻게 변할 것인지는 정확히 알 수 없다.  
코드나 소프트웨어가 시간이 지남에 따라 어떻게 변할지 완벽하고 정확하게 예측하는 것은 불가능하다.  
하지만 어떻게 변할지 정확히 알지 못한다고 해서 변한다는 사실 자체를 완전히 무시해야 하는 것은 아니다.  
이후에 코드가 어떻게 적응해야 할지 미리 정확히 알지 못해도, 적응성 높은 코드를 작성하기 위해 채택할 수 있는 몇 가지 일반적인 기술이 있다.  

### 코드는 이미 존재하는 기능을 중복 구현해서는 안되낟.  
문제를 해결하기 위해 코드를 작성할 때, 일반적으로 큰 문제를 여러 개의 작은 하위 문제로 나눈다.  
하위 문제 중 많은 것들은 이미 다른 사람이 해결한 상태다. 이미 구현된 코드를 재사용하면 좋은 몇 가지 이유가 있다.
- 시간과 노력을 절약한다.
- 버그 가능성을 줄여준다.
- 기존 전문지식을 활용한다.
- 코드가 이해하기 쉽다.

이미 있는 코드는 다시 작성하지 않는다는 개념은 양방향으로 적용된다.  
어떤 하위 수준의 문제를 해결하기 위해 다른 개발자가 이미 코드를 작성했다면, 그것을 해결하기 위해 자신의 코드를 작성하기보다는 그들의 코드를 사용해야 한다.  
마찬가지로 어떤 하위 문제를 해결하기 위해 자신이 코드를 작성했다면, 다른 개발자들이 동일한 문제를 해결하기 위해 자신만의 코들르 다시 작성하지 않도록 쉽게 재사용할 수 있는 방식으로 코드를 구성해야 한다.  


## 코드 품질의 핵심 요소  
코드 품질의 여섯가지 핵심 요소는 다음과 같다.

### 코드는 읽기 쉬워야 한다
코드를 읽을 때 다음과 같은 사항을 이해하기 위해 노력한다.  
- 코드가 하는 일
- 어떻게 그 일을 수행하는가?
- (입력이나 상태 등) 어떤 것을 필요로 하는지
- 코드 실행 결과물

코드를 작성하고 난 후 어느 시점이 되면 다른 개발자가 그 코드를 읽고 이해해야 하는 상황이 반드시 온다.  
코드의 가독성이 떨어진다면 다른 개발자가 그 코드를 이해하는 데 많은 시간을 들여야 한다. 또한 코드의 기능에 대해 잘못 이해하거나 몇 가지 중요한 세부 사항을 놓칠 가능성 역시 크다 

### 코드는 예측 가능해야 한다
코드가 예상에서 벗어나는 일을 한다면, 그 코드를 사용하는 개발자는 그 상황을 알지 못하거나 그 상황에 대처할 생각을 하지 못할 것이다.  
이로 인해 문제의 코드와는 전혀 상관없어 보이는 부분에서 명백하게 이상한 일이 발견되기 전까지 시스템은 계속 비정상적으로 작동한다.  
이런 코드는 사소한 오류를 일으킬 수도 있지만, 어떤 경우에는 중요한 데이터가 손상되는 사왕을 초래할 수도 있다.  
코드가 예상을 벗어나는 일을 수행하지는 않는지 주의 깊게 살펴야 하고, 그런 코드를 작성하지 않도록 노력해야 한다.

### 코드를 오용하기 어렵게 만들라
자신이 작성하는 코드는 종종 다른 코드에 의해 호출된다.  
자신이 작성한 코드에 잘못된 것들이 꽂히면 모든 것이 폭발할 수 있다.  
시스템이 작동을 멈추고, 데이터베이스가 손상되고, 중요한 데이터가 손실될 수 있다.  
코드를 오용하기 어렵거나 불가능하게 하면 코드가 작동할 뿐만 아니라 계속해서 잘 작동할 가능성을 극대화할 수 있다.

### 코드를 모듈화하라
모듈화는 개체나 시스템의 구성 요소가 독립적으로 교환되거나 교체될 수 있음을 의미한다.  
모듈화된 시스템의 주요 특징 중 하나는 인터페이스가 잘 정의되어 서로 다른 구성 요소 간 상호작용하는 지점이 초소화된다는 점이다.  
소프트웨어 시스템은 코드를 외부에 의존하지 않고 실행할 수 있는 모듈로 나누는 것이 이로울 때가 많다.  
두 개의 인접한 모듈 사이의 상호작용은 잘 정의된 인터페이스를 사용하여 한 곳에서만 일어난다.  
이렇게 하면 변화하는 요구 사항에 더 쉽게 적응할 수 있는 코드를 작성하는 데 도움이 된다. 한 가지 기능을 변경한다고 해서 다른 부분까지 변경할 필요가 없기 때문이다.  
모듈화된 시스템은 이해하기 쉽고 추론하기 쉬운데, 기능이 관리 가능한 단위로 나누어지고 기능 단위 간 상호작용이 잘 정의되고 문서화되기 때문이다.

### 코드를 재사용 가능하고 일반화할 수 있게 작성하라 
재사용성은 어떤 문제를 해결하기 위한 무언가가 여러 가지 다른 상황에서도 사용될 수 있음을 의미한다.  
일반화성은 개념적으로는 유사하지만 서로 미묘하게 다른 문제들을 해결할 수 있음을 의미한다.  

코드는 만들어 내는 데 시간과 노력이 필요하며, 일단 만들어지면 유지보수에 지속적인 시간과 노력이 들어간다.  
코드를 작성하는 일이 위험이 없는 것은 아니다. 아무리 조심한다고 해도 코드에는 버그가 포함될 수 있고, 코드를 더 많이 작성할수록 더 많은 버그가 생길 것이다.  
여기서 중요한 것은 코드베이스에서 코드 라인이 적을수록 좋다는 것이다.  
우리는 코드를 많이 작성한 것에 대한 대가를 받는 것이 아니라 문제를 해결한 것에 대한 대가를 받는 것이다.  
코드는 문제 해결을 위한 수단일 뿐이다. 노력을 덜 기울이면서도 문제를 해결하고, 버그로 인해 의도치 않게 다른 문제를 일으킬 가능성을 줄일 수 있다면 그것은 대단한 것이다.

### 테스트가 용이한 코드를 작성하고 제대로 테스트 하라 
테스트는 배포 프로세스에서 두 가지 핵심사항에 대한 주된 방어 수단이 될 때가 많다.
- 버그나 제대로 동작하지 않는 기능을 갖는 코드가 코드베이스에 병합되지 않도록 방지
- 버그나 제대로 동작하지 않는 기능을 갖는 코드가 배포되지 않도록 막고 서비스 환경에서 실행되지 않도록 보장.

따라서 테스트는 코드가 동작하고, 멈추지 않고 계속 잘 실행하도록 보장하기 위해 필수적인 부분이다.  
소프트웨어 개발에서 테스트가 얼마나 중요한지는 아무리 강조해도 지나치지 않다.  
소프트웨어 시스템과 코드 베이스는 너무 크고 복잡해 한 사람이 모든 세부 사항을 알 수 없고, 매우 똑똑한 개발자라 해도 사람은 실수를 하는 존재다.

테스트 용이성이란 개념이 있는데, 이는 테스트 대상이 되는 실제 코드를 가리키며 해당 코드가 얼마나 테스트하기 적합한지를 나타낸다.  
코드의 테스트 용이성이 낮으면 제대로 테스트한느 것이 불가능할 수 있다. 현재 작성 중인 코드의 테스트 용이성을 확인하기 위해 코드를 작성하면서 '어떻게 테스트할 것인가?'를 계속 자문하는 것이 좋다.  
즉 코드를 다 작성하고 나서 테스트에 대해 생각해서는 안된다. 테스트는 코드 작성의 모든 단계에서 필수적이고 기본적인 부분이다.

## 코품질 코드 작성은 일정을 지연시키는가?
단기적으로는 고품질 코드를 작성하는 데 시간이 더 걸릴 수 있다.  
높은 품질의 코드를 작성하는 것은 보통 우리 머릿속에 떠오르는 것을 바로 코딩하는 것보다 조금 더 많은 생각과 노력이 필요하다.  
하지만 한번 사용하고 버릴 사소한 유틸성 프로그램이 아닌 좀 더 중요한 소프트웨어를 개발하고 있다면, 일반적으로 고품질 코드를 작성하는 것이 중장기적으로는 개발 시간을 단축해준다.  
코드 품질을 고려하지 않고 먼저 떠오르는 대로 코딩하면 처음에는 시간을 절약할 수 있다. 그러나 이런 코드는 머지않아 취약하고 복잡한 코드베이스로 귀결될 것이며, 점점 더 이해하기 어렵고 추론할수 없는 코드가 된다.  
새로운 기능을 추가하거나 버그를 수정하는 것이 점점 더 어려워지고 시간도 더 많이 걸리는데, 작동하지 않는 코드를 처리하고 재설계해야 하기 때문이다.  



1장을 읽으면서 가장 인상깊었던건 다음 구절이다.
> 우리는 코드를 많이 작성한 것에 대한 대가를 받는 것이 아니라 문제를 해결한 것에 대한 대가를 받는 것이다.  
> 코드는 문제 해결을 위한 수단일 뿐이다.

처음 개발자를 시작했던 회사에서 코딩을 하지 않고 해결할수 있는 개발자가 뛰어난 개발자란 말을 들었었고,  
개발자는 코딩하는 사람이 아니라 문제를 해결하는 사람이라는 말도 많이 들었다.  

위에서 말하는 안좋은 사례들을 내가 하고 있지는 않았나, 좋은 소프트웨어를 만들기 위해 노력하고 있나라는 생각이 많이 들었다.  
최근들어 점점 시간에 쫓기듯이 개발을 하고, 좋은 구조를 위해 고민하는 시간이 적지 않았나 라는 생각이 든다..  